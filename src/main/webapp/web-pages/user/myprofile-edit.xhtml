<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:pretty="http://ocpsoft.com/prettyfaces"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:b="http://bootsfaces.net/ui">
	
	<h:body>
		<ui:composition template="/template/layout-template.xhtml">
			<ui:define name="title">Mon profil - Modification</ui:define>
					
			<ui:define name="content">
				<div class="panel panel-default common-titlepanel">
				  	<div class="panel-heading common-titlepanel-header">Mon profil - Modification</div>
				</div>
				
				<div class="panel panel-default common-panel">
					<div class="panel-body common-panel-body">				
						<h:form role="form">
							<h:panelGroup id="emailGroup" class="form-group #{loginController.formClassEmail}" layout="block">
								<h:outputLabel for="email">Email</h:outputLabel>
								<h:inputText id="email" class="form-control" value="#{loginController.myUser.email}" requiredMessage="Ce champs est requis."
											validator="#{loginController.validateEmailEdit}" required="true">
											
											<f:ajax event="blur" render="emailMessage emailGroup" />
								</h:inputText>
								<h:message id="emailMessage" for="email" styleClass="text-danger"></h:message>
							</h:panelGroup>
							<h:panelGroup id="passwordGroup" class="form-group" layout="block">
								<h:outputLabel for="password">Mot de passe</h:outputLabel>
								<h:inputSecret id="password" class="form-control" value="#{loginController.password}"/>
								<h:message for="password" styleClass="text-danger"></h:message>
							</h:panelGroup>
							<h:panelGroup id="password2Group" class="form-group #{loginController.formClassPassword2}" layout="block">
								<h:outputLabel for="password2">Retapez le mot de passe</h:outputLabel>
								<h:inputSecret id="password2" class="form-control" value="#{loginController.password2}" binding="#{loginController.password2Component}"/>
								<h:message for="password2" styleClass="text-danger"></h:message>
							</h:panelGroup>
							
							<h:panelGroup styleClass="pull-left">
								<pretty:link mappingId="index"><h:outputText value="Annuler" styleClass="btn btn-default"/></pretty:link>
							</h:panelGroup>
							<h:panelGroup styleClass="pull-right">
								<h:commandButton value="Enregistrer" class="btn btn-default" actionListener="#{loginController.modifyUser}"/>
							</h:panelGroup>
						</h:form>
					</div>
				</div>
			</ui:define>
		</ui:composition>
	</h:body>
	
</html>